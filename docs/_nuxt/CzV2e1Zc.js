import{g as ce,v as Z,x as ee,y as te,b as s,z as M,A as fe,p as se,B as ve,C as me,I as j,D as pe,F as ae,_ as he,s as H,r as Q,j as ge,c as y,a as r,w as a,o as m,d as u,t as d,k as o,q as L,n as J,m as D,l as be}from"./DmSx2D5A.js";import{g as xe,V as K,c as S,d as R,a as W,b as z,e as we,h as ye}from"./D5sIYJQG.js";import{a as v,V as _e,c as E,d as Ve,b as Ae}from"./BK0OWtm9.js";import{V as I}from"./CtNOvXZ4.js";import{V as X}from"./COVVCSGy.js";import{V as N,m as Ce,a as Y,b as ke,c as qe,d as Qe,e as De}from"./Dt2niVBr.js";const Ie=xe("v-spacer","div","VSpacer"),Pe=ce("question",{state:()=>({questionsData:null,currentQuestion:null,userAnswers:[],currentQuestionIndex:0,showResults:!1,evaluationStarted:!1}),actions:{async fetchQuestions(){try{const e=await $fetch("/api/question");this.questionsData=e,this.setCurrentQuestion(0)}catch(e){console.error("Error fetching questions:",e)}},setCurrentQuestion(e){this.questionsData&&this.questionsData.questions[e]&&(this.currentQuestion={...this.questionsData.questions[e]},this.currentQuestionIndex=e)},answerQuestion(e,l){if(!this.questionsData)return!1;const i=this.questionsData.questions.find(g=>g.id===e);if(!i)return!1;const n=i.correctAnswer===l,A=this.userAnswers.findIndex(g=>g.questionId===e),h={questionId:e,selectedOption:l,isCorrect:n,timestamp:new Date};return A!==-1?this.userAnswers[A]=h:this.userAnswers.push(h),n},nextQuestion(){this.questionsData&&this.currentQuestionIndex<this.questionsData.questions.length-1&&this.setCurrentQuestion(this.currentQuestionIndex+1)},previousQuestion(){this.currentQuestionIndex>0&&this.setCurrentQuestion(this.currentQuestionIndex-1)},startEvaluation(){this.evaluationStarted=!0,this.userAnswers=[],this.currentQuestionIndex=0,this.showResults=!1,this.setCurrentQuestion(0)},finishEvaluation(){this.showResults=!0},resetEvaluation(){this.userAnswers=[],this.currentQuestionIndex=0,this.showResults=!1,this.evaluationStarted=!1,this.setCurrentQuestion(0)},getQuestionById(e){return this.questionsData?this.questionsData.questions.find(l=>l.id===e):null},getUserAnswer(e){return this.userAnswers.find(l=>l.questionId===e)}},getters:{score:e=>{if(e.userAnswers.length===0)return 0;const l=e.userAnswers.filter(i=>i.isCorrect).length;return Math.round(l/e.userAnswers.length*100)},correctAnswersCount:e=>e.userAnswers.filter(l=>l.isCorrect).length,totalAnswered:e=>e.userAnswers.length,scoreLevel:e=>{if(!e.questionsData)return null;const l=Math.round(e.userAnswers.filter(i=>i.isCorrect).length/e.userAnswers.length*100);return l>=e.questionsData.scoring.excellent.min?e.questionsData.scoring.excellent:l>=e.questionsData.scoring.good.min?e.questionsData.scoring.good:l>=e.questionsData.scoring.fair.min?e.questionsData.scoring.fair:e.questionsData.scoring.poor},isPassed:e=>e.questionsData?Math.round(e.userAnswers.filter(i=>i.isCorrect).length/e.userAnswers.length*100)>=e.questionsData.evaluation.passingScore:!1}}),Se=ee({...Ce({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Re=Z()({name:"VRadio",props:Se(),setup(e,l){let{slots:i}=l;return te(()=>{const n=N.filterProps(e);return s(N,M(n,{class:["v-radio",e.class],style:e.style,type:"radio"}),i)}),{}}}),ze=ee({height:{type:[Number,String],default:"auto"},...ke(),...pe(qe(),["multiple"]),trueIcon:{type:j,default:"$radioOn"},falseIcon:{type:j,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Ee=Z()({name:"VRadioGroup",inheritAttrs:!1,props:ze(),emits:{"update:modelValue":e=>!0},setup(e,l){let{attrs:i,slots:n}=l;const A=fe(),h=se(()=>e.id||`radio-group-${A}`),g=ve(e,"modelValue");return te(()=>{const[O,B]=me(i),$=Y.filterProps(e),F=N.filterProps(e),x=n.label?n.label({label:e.label,props:{for:h.value}}):e.label;return s(Y,M({class:["v-radio-group",e.class],style:e.style},O,$,{modelValue:g.value,"onUpdate:modelValue":w=>g.value=w,id:h.value}),{...n,default:w=>{let{id:_,messagesId:b,isDisabled:f,isReadonly:P}=w;return s(ae,null,[x&&s(Qe,{id:_.value},{default:()=>[x]}),s(De,M(F,{id:_.value,"aria-describedby":b.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:f.value,readonly:P.value,"aria-labelledby":x?_.value:void 0,multiple:!1},B,{modelValue:g.value,"onUpdate:modelValue":C=>g.value=C}),n)])}})}),{}}}),Oe={class:"evaluacion-page"},Be={class:"hero-section"},$e={class:"text-center py-12"},Le={class:"text-h2 font-weight-bold text-white mb-2"},Me={class:"text-h6 text-purple-lighten-4"},Ne={key:0,class:"text-center py-12"},Fe={key:1,class:"text-center py-12"},Ge={key:2,class:"text-center"},Te={class:"text-body-1 text-grey-darken-1 mb-6"},Ue={class:"text-center"},je={class:"text-h6 font-weight-bold"},He={class:"text-center"},Je={class:"text-h6 font-weight-bold"},Ke={class:"text-center"},We={key:3,class:"text-center"},Xe={class:"score-display mb-6"},Ye={class:"text-body-1 text-grey-darken-1"},Ze={class:"mb-6"},et={key:4},tt={class:"d-flex align-center justify-space-between mb-2"},st={class:"text-body-2 font-weight-bold"},at={class:"text-body-2"},ot={class:"d-flex align-center mb-4"},rt={class:"text-white font-weight-bold"},lt={class:"text-h5 font-weight-bold"},nt={__name:"evaluacion",setup(e){const l=Pe(),{questionsData:i,currentQuestion:n,userAnswers:A,currentQuestionIndex:h,showResults:g,evaluationStarted:O}=H(l),{score:B,correctAnswersCount:$,totalAnswered:F,scoreLevel:x,isPassed:w}=H(l),_=Q(!0),b=Q(""),f=Q(!1),P=Q(""),C=Q(!1);ge(async()=>{try{await l.fetchQuestions()}finally{_.value=!1}});const oe=p=>{if(!n.value)return;b.value=p;const t=l.answerQuestion(n.value.id,p);C.value=t,P.value=t?"¡Correcto! "+n.value.explanation:"Incorrecto. "+n.value.explanation,f.value=!0},re=()=>{b.value="",f.value=!1,l.nextQuestion()},le=()=>{b.value="",f.value=!1,l.previousQuestion()},ne=()=>{l.finishEvaluation()},ie=()=>{b.value="",f.value=!1,l.resetEvaluation()},ue=()=>{l.startEvaluation()},G=p=>!f.value||!n.value?"default":p===n.value.correctAnswer?"success":p===b.value&&p!==n.value.correctAnswer?"error":"default",de=p=>!f.value||!n.value?"outlined":p===n.value.correctAnswer||p===b.value&&p!==n.value.correctAnswer?"flat":"outlined",T=se(()=>i.value?Math.round((h.value+1)/i.value.questions.length*100):0);return(p,t)=>(m(),y("div",Oe,[r("div",Be,[s(K,null,{default:a(()=>{var c,V,k,q;return[r("div",$e,[s(v,{size:"80",color:"white",class:"mb-4"},{default:a(()=>t[1]||(t[1]=[u("mdi-clipboard-check-outline")])),_:1}),r("h1",Le,d(((V=(c=o(i))==null?void 0:c.evaluation)==null?void 0:V.title)||"Evaluación"),1),r("p",Me,d(((q=(k=o(i))==null?void 0:k.evaluation)==null?void 0:q.description)||"Pon a prueba tus conocimientos"),1)])]}),_:1})]),s(K,{class:"mt-8"},{default:a(()=>[_.value?(m(),y("div",Ne,[s(_e,{indeterminate:"",size:"64",color:"primary",class:"mb-4"}),t[2]||(t[2]=r("p",{class:"text-h6 text-grey-darken-1"},"Cargando evaluación...",-1))])):o(i)?o(O)?o(g)?(m(),y("div",We,[s(S,{class:"mx-auto","max-width":"600",elevation:"8",rounded:"xl"},{default:a(()=>[s(R,{class:"pa-8"},{default:a(()=>{var c,V,k,q;return[s(v,{icon:(c=o(x))==null?void 0:c.icon,color:(V=o(x))==null?void 0:V.color,size:"80",class:"mb-4"},null,8,["icon","color"]),t[18]||(t[18]=r("h2",{class:"text-h4 font-weight-bold mb-4"},"Evaluación Completada",-1)),r("div",Xe,[r("div",{class:J(["text-h2 font-weight-bold",`text-${(k=o(x))==null?void 0:k.color}`])},d(o(B))+"% ",3),r("div",Ye,d(o($))+" de "+d(o(i).evaluation.totalQuestions)+" correctas ",1)]),s(X,{type:(q=o(x))==null?void 0:q.color,variant:"tonal",class:"mb-6"},{default:a(()=>{var U;return[u(d((U=o(x))==null?void 0:U.message),1)]}),_:1},8,["type"]),r("div",Ze,[s(E,{color:o(w)?"success":"error",size:"large",class:"font-weight-bold"},{default:a(()=>[s(v,{start:""},{default:a(()=>[u(d(o(w)?"mdi-check-circle":"mdi-close-circle"),1)]),_:1}),u(" "+d(o(w)?"APROBADO":"NO APROBADO"),1)]),_:1},8,["color"])]),s(I,{color:"primary",variant:"outlined",block:"",onClick:ie},{default:a(()=>[s(v,{start:""},{default:a(()=>t[16]||(t[16]=[u("mdi-restart")])),_:1}),t[17]||(t[17]=u(" Intentar de Nuevo "))]),_:1})]}),_:1})]),_:1})])):o(n)?(m(),y("div",et,[s(W,null,{default:a(()=>[s(z,{cols:"12"},{default:a(()=>[s(S,{class:"mb-6",elevation:"4",rounded:"xl"},{default:a(()=>[s(R,{class:"pa-4"},{default:a(()=>[r("div",tt,[r("span",st," Pregunta "+d(o(h)+1)+" de "+d(o(i).evaluation.totalQuestions),1),r("span",at,d(T.value)+"%",1)]),s(Ve,{"model-value":T.value,color:"primary",height:"8",rounded:""},null,8,["model-value"])]),_:1})]),_:1}),s(S,{class:"question-card mb-6",elevation:"8",rounded:"xl"},{default:a(()=>[s(we,{class:"pa-6"},{default:a(()=>[r("div",ot,[s(Ae,{color:"primary",size:"40",class:"mr-3"},{default:a(()=>[r("span",rt,d(o(n).id),1)]),_:1}),r("div",null,[s(E,{color:"info",variant:"outlined",size:"small",class:"mr-2"},{default:a(()=>[u(d(o(n).difficulty),1)]),_:1}),s(E,{color:"primary",variant:"outlined",size:"small"},{default:a(()=>[u(d(o(n).topic),1)]),_:1})])]),r("h3",lt,d(o(n).question),1)]),_:1}),s(R,{class:"pa-6"},{default:a(()=>[s(Ee,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=c=>b.value=c),disabled:f.value},{default:a(()=>[(m(!0),y(ae,null,be(o(n).options,c=>(m(),D(Re,{key:c.id,value:c.id,color:G(c.id),onClick:V=>!f.value&&oe(c.id)},{label:a(()=>[s(E,{color:G(c.id),variant:de(c.id),class:"mr-3",size:"small"},{default:a(()=>[u(d(c.id.toUpperCase()),1)]),_:2},1032,["color","variant"]),r("span",{class:J(f.value&&c.id===o(n).correctAnswer?"font-weight-bold":"")},d(c.text),3)]),_:2},1032,["value","color","onClick"]))),128))]),_:1},8,["modelValue","disabled"]),f.value?(m(),D(X,{key:0,type:C.value?"success":"error",variant:"tonal",class:"mt-4",icon:C.value?"mdi-check-circle":"mdi-close-circle"},{default:a(()=>[u(d(P.value),1)]),_:1},8,["type","icon"])):L("",!0)]),_:1}),s(ye,{class:"pa-6"},{default:a(()=>[o(h)>0?(m(),D(I,{key:0,color:"grey",variant:"outlined",onClick:le,disabled:!f.value},{default:a(()=>[s(v,{start:""},{default:a(()=>t[19]||(t[19]=[u("mdi-arrow-left")])),_:1}),t[20]||(t[20]=u(" Anterior "))]),_:1},8,["disabled"])):L("",!0),s(Ie),o(h)<o(i).evaluation.totalQuestions-1?(m(),D(I,{key:1,color:"primary",onClick:re,disabled:!f.value},{default:a(()=>[t[22]||(t[22]=u(" Siguiente ")),s(v,{end:""},{default:a(()=>t[21]||(t[21]=[u("mdi-arrow-right")])),_:1})]),_:1},8,["disabled"])):(m(),D(I,{key:2,color:"success",onClick:ne,disabled:!f.value},{default:a(()=>[t[24]||(t[24]=u(" Finalizar ")),s(v,{end:""},{default:a(()=>t[23]||(t[23]=[u("mdi-check")])),_:1})]),_:1},8,["disabled"]))]),_:1})]),_:1})]),_:1})]),_:1})])):L("",!0):(m(),y("div",Ge,[s(S,{class:"mx-auto","max-width":"600",elevation:"8",rounded:"xl"},{default:a(()=>[s(R,{class:"pa-8"},{default:a(()=>[s(v,{size:"80",color:"primary",class:"mb-4"},{default:a(()=>t[5]||(t[5]=[u("mdi-school")])),_:1}),t[15]||(t[15]=r("h2",{class:"text-h4 font-weight-bold mb-4"},"¿Listo para la evaluación?",-1)),r("p",Te,d(o(i).evaluation.instructions),1),s(W,{class:"mb-6"},{default:a(()=>[s(z,{cols:"4"},{default:a(()=>[r("div",Ue,[s(v,{size:"40",color:"info",class:"mb-2"},{default:a(()=>t[6]||(t[6]=[u("mdi-help-circle")])),_:1}),r("div",je,d(o(i).evaluation.totalQuestions),1),t[7]||(t[7]=r("div",{class:"text-caption"},"Preguntas",-1))])]),_:1}),s(z,{cols:"4"},{default:a(()=>[r("div",He,[s(v,{size:"40",color:"success",class:"mb-2"},{default:a(()=>t[8]||(t[8]=[u("mdi-target")])),_:1}),r("div",Je,d(o(i).evaluation.passingScore)+"%",1),t[9]||(t[9]=r("div",{class:"text-caption"},"Para aprobar",-1))])]),_:1}),s(z,{cols:"4"},{default:a(()=>[r("div",Ke,[s(v,{size:"40",color:"warning",class:"mb-2"},{default:a(()=>t[10]||(t[10]=[u("mdi-clock-outline")])),_:1}),t[11]||(t[11]=r("div",{class:"text-h6 font-weight-bold"},"Sin límite",-1)),t[12]||(t[12]=r("div",{class:"text-caption"},"Tiempo",-1))])]),_:1})]),_:1}),s(I,{color:"primary",size:"large",block:"",onClick:ue},{default:a(()=>[s(v,{start:""},{default:a(()=>t[13]||(t[13]=[u("mdi-play")])),_:1}),t[14]||(t[14]=u(" Comenzar Evaluación "))]),_:1})]),_:1})]),_:1})])):(m(),y("div",Fe,[s(v,{size:"64",color:"error",class:"mb-4"},{default:a(()=>t[3]||(t[3]=[u("mdi-alert-circle-outline")])),_:1}),t[4]||(t[4]=r("p",{class:"text-h6 text-error"},"Error al cargar la evaluación",-1))]))]),_:1})]))}},mt=he(nt,[["__scopeId","data-v-b4c4b1fc"]]);export{mt as default};
